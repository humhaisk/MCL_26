{% extends "base.html" %}
{% load static %}

{% block titleLink %}
<title>MCL-Teamlist</title>

<style>
  /* ===== BASE BOX ===== */
  .custom-box {
    background-color: var(--secondary-bg);
    border: 2px solid var(--border-color);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
  }

  .header-title {
    color: var(--accent-color);
    font-weight: bold;
    border-left: 4px solid var(--accent-color);
    padding-left: 8px;
  }

  /* ===== TEAM LOGO ===== */
  .team-logo-circle {
    width: 70px;
    height: 70px;
    border: 2px solid var(--border-color);
    border-radius: 50%;
    object-fit: cover;
    background-color: var(--primary-bg);
  }

  /* ===== TABLE ===== */
  .table-custom {
    --bs-table-bg: var(--secondary-bg);
    --bs-table-color: var(--text-color);
  }

  .table-custom th,
  .table-custom td {
    padding: 12px;
    vertical-align: middle;
  }

  .table-custom thead th {
    border-bottom: 2px solid var(--border-color);
    font-weight: 600;
  }

  .table-responsive {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
  }

  /* ===== HEADER ROW ===== */
  .team-header {
    background-color: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
  }

  .team-name {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--accent-color);
  }

  /* ===== POINTS + LOGO ===== */
  .points-logo-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
  }

  /* ===== DIVIDER ===== */
  .divider {
    border-left: 2px solid var(--border-color);
    height: 100%;
  }

  /* ===== BUTTON ===== */
  .btn-control {
    width: 100%;
    padding: 15px;
    font-size: 1.1rem;
    font-weight: bold;
    border-radius: 8px;
  }

  .btn-logout-admin {
    background-color: var(--primary-bg);
    color: var(--danger-text);
    border: 2px solid var(--danger-text);
  }

  .btn-logout-admin:hover {
    background-color: var(--danger-text);
    color: var(--primary-bg);
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .points-logo-wrapper {
      flex-direction: column;
    }

    .team-logo-circle {
      width: 60px;
      height: 60px;
    }

    .divider {
      display: none;
    }
  }
</style>
{% endblock titleLink %}

{% block main %}
<main class="container-fluid px-3 px-md-4 py-3">

  <!-- HEADER -->
  <div class="row team-header align-items-center mb-4">
    <div class="col-md-4 text-center text-md-start">
      <div class="team-name">{{ team.TeamName }}</div>
    </div>

    <div class="col-md-8">
      <div class="points-logo-wrapper">
        <div class="custom-box">
          <b>Current Balance :</b><br>
          &#129689; <span class="text-warning">{{ price_re }}</span>
        </div>
        <img src="{{ team.TeamLogo.url }}" class="team-logo-circle" alt="Team Logo">
      </div>
    </div>
  </div>

  <!-- SUMMARY -->
  <div class="mb-4">
    <table class="table table-custom text-center">
      <thead>
        <tr>
          <th>Total Players</th>
          <th>Total Managers</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ players|length }}</td>
          <td>{{ managers|length }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- MAIN CONTENT -->
  <div class="row">

    <!-- PLAYERS -->
    <div class="col-lg-6 mb-4">
      <h5 class="header-title mb-3">Player List</h5>
      <div class="table-responsive">
        <table class="table table-custom text-center">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Role</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody>
            {% for player in players %}
            <tr>
              <td>{{ player.playername.P_ID }}</td>
              <td>{{ player.playername.Name }}</td>
              <td>{{ player.playername.PlayerRole }}</td>
              <td>{{ player.price }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- DIVIDER -->
    <div class="col-lg-1 d-none d-lg-flex justify-content-center">
      <div class="divider"></div>
    </div>

    <!-- MANAGERS -->
    <div class="col-lg-5 mb-4">
      <h5 class="header-title mb-3">Manager List</h5>
      <div class="table-responsive">
        <table class="table table-custom text-center">
          <thead>
            <tr>
              <th>Name</th>
              <th>Dept</th>
              <th>Batch</th>
            </tr>
          </thead>
          <tbody>
            {% for manager in managers %}
            <tr>
              <td>{{ manager.Name }}</td>
              <td>{{ manager.Dept }}</td>
              <td>{{ manager.Batch }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <!-- LOGOUT -->
  <div class="text-center mt-4">
    <button class="btn btn-control btn-logout-admin"
      onclick="document.getElementById('logout-form').submit()">
      Log Out
    </button>
  </div>

  <form id="logout-form" method="post" action="{% url 'logout' %}" style="display:none;">
    {% csrf_token %}
  </form>

</main>
{% endblock main %}
